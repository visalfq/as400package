<!DOCTYPE html>
<html>
<head>
    <title>Profound.js Sessions</title>
    <link rel="stylesheet" type="text/css" href="/sessions/w2ui.min.css">
</head>
<body>

<div id="grid" style="width: 100%; height: 790px; overflow: hidden;"></div>
<br>

<script type="module">
import { w2utils, w2grid } from '/sessions/w2ui.es6.min.js'

w2utils.settings.dateFormat = "yyyy-mm-dd:hh24:mm";

let grid = new w2grid({
  name: 'grid',
  box: '#grid',
  header: "Profound.js Sessions",
  show: { 
    header: true,
    toolbar: true,
    toolbarReload: false,
    lineNumbers: true 
  },
  method: 'GET', // need this to avoid 412 error on Safari
  columns: [
    { field: 'user', text: 'User', sortable: true, size: '18%' },
    { field: 'sessionId', text: 'Session Id', sortable: true, size: '7%' },
    { field: 'started', text: 'Started', sortable: true, size: '10%' },
    { field: 'expires', text: 'Expires', sortable: true, size: '10%' },
    { field: 'module', text: 'Module', sortable: true, size: '25%' },
    { field: 'screen', text: 'Screen', sortable: true, size: '14%' },
    { field: 'server', text: 'Server', sortable: true, size: '19%' }
  ],
  searches: [
    { type: 'text', field: 'user', label: 'User' },
    { type: 'text', field: 'sessionId', label: 'Session Id'},

    // commented out because yyyy-mm-dd:hh24:mm datetime search seems to be broken in w2grid at this time
    //{ type: 'datetime', field: 'started', label: 'Start Date/Time' },
    //{ type: 'datetime', field: 'expires', label: 'Expiration Date/Time' },

    { type: 'text', field: 'module', label: 'Current Module' },
    { type: 'text', field: 'screen', label: 'Current Screen' },
    { type: 'text', field: 'server', label: 'Server' }
  ]
})

grid.load("/sessions/data?servers=all");

</script>

</body>
</html>